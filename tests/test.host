;;;
var tests ()
fn test (`testCode& subject desc check)
    ifnot(istype(testCode Fn))
        set testCode (apply fn (() testCode))
    ; todo if(== check undefined)
        set check true
    var t: new
        subject=subject
        desc=desc
        test=testCode
        check=check
    tests.push t
    t

fn runTests ()
    var failed ()
    var passed ()
    map tests t
        try t.test!
        catch (e) e
        ; todo if(!= t.check _)
            failed , push _
        else
            passed , push _
    failed

export test runTests
;;;